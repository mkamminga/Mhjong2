<p *ngIf="!isLoggedIn()">
Please login to view any games!
</p>

<div *ngIf="isLoggedIn()">
    <h2>Games</h2>
    <hr />
    <div>
        <a class="button large secondary" routerLink="new-game">Create new game</a>
    </div>
    <!-- Tabs -->
    <ul class="tabs" data-tabs>
        <li class="tabs-title is-active"><a aria-selected="true" (click)="selectTab('openGames')">Open games</a></li>
        <li class="tabs-title"><a (click)="selectTab('playingGames')">Currently playing</a></li>
        <li class="tabs-title"><a (click)="selectTab('closedGames')">Closed games</a></li>
    </ul>
    <div class="tabs-content">
        <!-- Open games -->
        <section role="tabpanel" [hidden]="currentTab != 'openGames'" class="content">
            <div class="callout rounded"  *ngFor="let game of games">
                <h5 class="clearfix">{{ game.createdBy.name }} <small class="float-right">{{ game.createdOn | date:'dd/MM/yyyy HH:mm:ss' }}</small></h5> 

                <hr />
                <span>Available places: <strong>{{ game.avaiablePlaces() }}</strong></span>

                <h6>Joined players</h6>
                <ul *ngIf="game.players.length > 0 ">
                    <li *ngFor="let player of game.players"> {{ player.name }}</li>
                </ul>

                <div>
                    <button type="button" class="small button success" *ngIf="game.canStart(currentPlayer)" (click)="startGame(game)">Start</button>
                    <button type="button" class="small button warning" *ngIf="game.canJoin(currentPlayer)" (click)="joinGame(game)">Join game</button> 
                </div>
            </div>
        </section>
        <!-- Currently Playing games -->
        <section role="tabpanel" [hidden]="currentTab != 'playingGames'" class="content">
            
            <div class="callout rounded"  *ngFor="let game of games">
                <h5 class="clearfix">{{ game.createdBy.name }} <small class="float-right">{{ game.createdOn | date:'dd/MM/yyyy HH:mm:ss' }}</small></h5> 
                <div>Started at: <strong>{{ game.startedOn | date:'dd/MM/yyyy HH:mm:ss' }}</strong></div>
                <hr />

                <h6>Joined players</h6>
                <ul *ngIf="game.players.length > 0 ">
                    <li *ngFor="let player of game.players"> {{ player.name }}</li>
                </ul>

                <button type="button" class="small button success" (click)="playGame(game)">Play</button>
            </div>
            
        </section>
        <!-- Played games -->
        <section role="tabpanel" [hidden]="currentTab != 'closedGames'" class="content">
            <h2>Third panel content goes here...</h2>
        </section>
    </div>
</div>

