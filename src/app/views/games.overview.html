<p *ngIf="!isLoggedIn()">
Please login to view any games!
</p>

<div *ngIf="isLoggedIn()">
    <h2>Games</h2>
    <hr />
    <div>
        <a class="button large secondary" routerLink="/games/new-game">Create new game</a>
    </div>
    <!-- Tabs -->
    <tabs>
        <tab tabTitle="Open games">
            <div *ngFor="let game of gameOverview.games" class="callout">
                <h5 class="clearfix">{{ game.createdBy.name }} <small class="float-right">{{ game.createdOn | date:'dd/MM/yyyy HH:mm:ss' }}</small></h5> 

                <hr />
                <span>Available places: <strong>{{ game.avaiablePlaces() }}</strong></span>

                <h6>Joined players</h6>
                <ul *ngIf="game.players.length > 0 ">
                    <li *ngFor="let player of game.players"> {{ player.name }}</li>
                </ul>

                <div>
                    <button type="button" class="small button success" *ngIf="game.canStart(gameOverview.currentPlayer)" (click)="gameOverview.startGame(game)">Start</button>
                    <button type="button" class="small button warning" *ngIf="game.canJoin(gameOverview.currentPlayer)" (click)="gameOverview.joinGame(game)">Join game</button> 
                </div>
            </div>
        </tab>

        <tab tabTitle="Playing games">
           <div *ngFor="let game of gamePlaying.games" class="callout">
                <h5 class="clearfix">{{ game.createdBy.name }} <small class="float-right">{{ game.createdOn | date:'dd/MM/yyyy HH:mm:ss' }}</small></h5> 
                <div>Started at: <strong>{{ game.startedOn | date:'dd/MM/yyyy HH:mm:ss' }}</strong></div>
                <hr />

                <h6>Joined players</h6>
                <ul *ngIf="game.players.length > 0 ">
                    <li *ngFor="let player of game.players"> {{ player.name }}</li>
                </ul>

                <button type="button" class="small button success" (click)="gamePlaying.playGame(game)">Play</button>
            </div>
        </tab>

        <tab tabTitle="Spectate games">
           <div *ngFor="let game of gamePlaying.games" class="callout">
                <h5 class="clearfix">{{ game.createdBy.name }} <small class="float-right">{{ game.createdOn | date:'dd/MM/yyyy HH:mm:ss' }}</small></h5> 
                <div>Started at: <strong>{{ game.startedOn | date:'dd/MM/yyyy HH:mm:ss' }}</strong></div>
                <hr />

                <h6>Players</h6>
                <ul *ngIf="game.players.length > 0 ">
                    <li *ngFor="let player of game.players"> {{ player.name }}</li>
                </ul>

                <button type="button" class="small button success" (click)="gamePlaying.playGame(game)">Spectate</button>
            </div>
        </tab>
    </tabs>
</div>

